<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback | Karan Kushwaha</title>
    <!-- Font Awesome Loader Link -->
    <script src="https://kit.fontawesome.com/25cf39dd91.js" crossorigin="anonymous"></script>
    <!--  -->
    <link rel="stylesheet" href="../CSS-Assets/Default-Style.css">
    <link rel="stylesheet" href="../CSS-Assets/Responsive-Styles.css">
    <link rel="stylesheet" href="../CSS-Assets/Feedback-Form.css">
</head>

<body>
    <div id="spinner">
        <div class="spinner"><i class="fa-solid fa-spinner"></i></div>
    </div>

    <!-- Popup -->
    <div id="popup">
        <div class="popup-content">
            <span><i class="fa-solid fa-check"></i></span>
            <p>Thank you! Your feedback has been received.</p>
            <button id="ok-button">OK</button>
        </div>
    </div>


    <div class="container">
        <div class="wrapper">
            <div class="heading-box">
                <h2 class="content-heading">I Value Your <span>Feedback !</span></h2>
            </div>
            <div class="mainbox">
                <div class="hero-photo"><img src="../Img-Assets/hero-img_karan kushwaha.png" alt=""></div>
                <form action="" method="post" name="feedback-form">
                    <input type="text" name="Name" id="Name" placeholder="Your Full Name" required>
                    <select name="Class" id="Class" required>
                        <option value="" disabled selected>Your Class</option>
                        <option value="6th Class">6th Standard</option>
                        <option value="7th Class">7th Standard</option>
                        <option value="8th Class">8th Standard</option>
                        <option value="9th Class">9th Standard</option>
                        <option value="10th Class">10th Standard</option>
                        <option value="11th Class Commerce">11th Commerce</option>
                        <option value="12th Class Commerce">12th Commerce</option>
                    </select>
                    <input type="tel" name="Phone" id="Phone" placeholder="Your Phone Number (Optional)">
                    <textarea name="Feedback" id="Feedback" rows="4"
                        placeholder="Share Your Thoughts or Suggestions and Your Feedback" required></textarea>
                    <button type="submit" id="submit" value="submit">Send <i
                            class="fa-solid fa-angles-right"></i></button>
                </form>
            </div>
        </div>
    </div>
    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbygoH8R80FMNrP6BlmTFFUf0O_2UJk3bpw7nJ3nHbgfldkK3SWeMmikgzyu8VW3m04WQA/exec';
        const form = document.forms['feedback-form'];
        const spinner = document.getElementById('spinner'); // Spinner element
        const popup = document.getElementById('popup'); // Popup element
        const okButton = document.getElementById('ok-button'); // OK button

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            // Show the spinner while the form is being submitted
            spinner.style.display = 'flex';

            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then((response) => {
                    // Hide the spinner and show the popup
                    spinner.style.display = 'none';
                    popup.style.display = 'flex';
                })
                .catch((error) => {
                    console.error('Error!', error.message);
                    alert('An error occurred while submitting the form. Please try again.');
                    spinner.style.display = 'none'; // Hide the spinner in case of error
                });
        });

        // Redirect after popup confirmation
        okButton.addEventListener('click', () => {
            // Clear the form fields
            form.reset();

            // Hide the popup
            popup.style.display = 'none';

            // Redirect to the specified URL
            window.location.href = 'https://karankushwaha.netlify.app'; // Replace with your desired redirect URL
        });
    </script>
</body>

</html>